<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="LLNL">
        <link rel="canonical" href="https://software.llnl.gov/quandary/config/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>C++ Configuration Reference - Quandary</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Quandary</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Basics</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../getting_started/" class="dropdown-item">Getting Started</a>
</li>
                                    
<li>
    <a href="../QuandaryWithPython_HowTo/" class="dropdown-item">Tutorial</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../user_guide/" class="nav-link">User Guide</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Reference</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../python_api/" class="dropdown-item">Python API Reference</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">C++ Configuration Reference</a>
</li>
                                    
<li>
    <a href="https://software.llnl.gov/quandary/doxygen/" class="dropdown-item">Doxygen</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../python_api/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#configuration-options" class="nav-link">Configuration Options</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#toml-configuration" class="nav-link">TOML Configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#configuration-template" class="nav-link">Configuration Template</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="configuration-options">Configuration Options</h1>
<p>Quandary supports <a href="https://toml.io/en/">TOML</a> configuration files (recommended) and legacy CFG format.</p>
<h2 id="toml-configuration">TOML Configuration</h2>
<p>TOML is the recommended configuration format. It provides a clear, hierarchical structure and better validation.</p>
<p>Note that some parameter names differ between TOML and the Python interface.
For a complete cross-reference of all parameters, see the <a href="../parameter_reference/">Parameter Reference</a>.</p>
<h2 id="configuration-template">Configuration Template</h2>
<p>Below is the complete template with comments explaining each parameter:</p>
<pre><code class="language-toml">[system]
# Number of levels per subsystem
nlevels = [2, 2]
# Number of essential levels per subsystem. Either a single value (same for all) or one per subsystem. (Default: same as nlevels)
nessential = [2, 2]
# Number of time steps used for time-integration
ntime = 1000
# Time step size (ns). Determines final time: T=ntime*dt
dt = 0.1
# Fundamental transition frequencies (|0&gt; to |1&gt; transition) for each subsystem (&quot;\omega_k&quot;, multiplying a_k^d a_k, GHz).
# Either a single value (same for all) or one per subsystem.
transition_frequency = [4.10595, 4.81526]
# transition_frequency = 4.1  # single value applies to all subsystems
# Self-kerr frequencies for each subsystem (&quot;\xi_k&quot;, multiplying a_k^d a_k^d a_k a_k, GHz).
# Either a single value (same for all) or one per subsystem. (Default: 0.0)
selfkerr = [0.2198, 0.2252]
# selfkerr = 0.22  # single value applies to all subsystems
# Cross-kerr coupling strength for subsystems k&lt;-&gt;l (&quot;\xi_kl&quot;, multiplying a_k^d a_k a_l^d a_l, GHz).
# Option 1: All-to-all connectivity with single value
# crosskerr_coupling = 0.1
# Option 2: Per-subsystem-pair coupling using array of tables
crosskerr_coupling = [
  { subsystem = [0,1], value = 0.1 }
]
# Dipole-dipole coupling strength for subsystems k&lt;-&gt;l (&quot;J_kl&quot;, multiplying a_k^d a_l + a_k a_l^d, GHz).
# Option 1: All-to-all connectivity with single value
dipole_coupling = 0.0
# Option 2: Per-subsystem-pair coupling using array of tables
# dipole_coupling = [
#   {subsystem = [0,1], value = 0.0 }
# ]
# Rotational wave approximation frequencies for each subsystem (&quot;\omega_rot&quot;, GHz).
# Either a single value (same for all) or one per subsystem. (Default: 0.0)
rotation_frequency = [4.10595, 4.81526]
# rotation_frequency = 0.0  # single value applies to all subsystems

# Decoherence setting: Switch between Schroedinger and Lindblad solver. Default is &quot;none&quot; which solves Schroedinger equation (state vector dynamics), all other types solve Lindblads master equation for the density matrix.
decoherence = { type = &quot;none&quot;,              # &quot;none&quot;, &quot;decay&quot;, &quot;dephase&quot;, or &quot;both&quot;
            #    decay_time = [0.0, 0.0],   # Decay times T1: single value or one per subsystem (ns)
            #    dephase_time = [0.0, 0.0]  # Dephasing times T2: single value or one per subsystem (ns)
              }

# Specify the initial conditions that are to be propagated
# Avalable initial condition types:
# &quot;basis&quot; - all basis states of the full composite system, or of specified subsystems (subsystem = [...])
# &quot;state&quot; - single initial state specified as levels of a product state (levels = [...])
# &quot;file&quot; - read one initial state from file (filename = &quot;...&quot;)
# &quot;diagonal&quot; - for Lindblad solver, all diagonal basis density matrices of the full system, or of specified subsystems (subsystem = [...])
# &quot;ensemble&quot; - for Lindblad solver, ensemble state used for pure-state preparation, optionally over specified subsystems (subsystem = [...])
# &quot;3states&quot; - for Lindblad solver, three initial states for gate optimization
# &quot;nplus1&quot; - for Lindblad solver, N+1 initial states for fidelity estimation
initial_condition = {type = &quot;basis&quot;}
# initial_condition = {type = &quot;state&quot;, levels = [1, 0]}
# initial_condition = {type = &quot;basis&quot;, subsystem = [0, 1]}
# initial_condition = {type = &quot;file&quot;, filename = &quot;path/to/initial_state.dat&quot;}

# Optional: Read system Hamiltonian from file (default: none - use built-in Hamiltonian)
# hamiltonian_file_Hsys = &quot;/path/to/system_hamiltonian.dat&quot;
# Optional: Read control Hamiltonian from file (default: none - use built-in Hamiltonian)
# hamiltonian_file_Hc = &quot;/path/to/control_hamiltonian.dat&quot;

[control]
# Control parameterization options:
# Available control types:
# &quot;spline&quot; - 2nd order B-spline basis functions (recommended).
# &quot;spline0&quot; - piecewise constant control parameterization (0th order B-splines)
# &quot;spline_amplitude&quot; - amplitude-only parameterization
# For each type, specify number of basis functions (num), and optionally start and stop times (tstart, tstop)
# Option 1: Parameterization that applies to all subsystems
parameterization = { type = &quot;spline&quot;, num = 150}
# parameterization = { type = &quot;spline0&quot;, num = 300 , tstart = 0.0, tstop = 10.0 }

# Option 2: Specify different parameterizations per-subsystem as array of tables
# parameterization = [
#   { subsystem = 0, type = &quot;spline&quot;, num = 150, tstart = 0.0, tstop = 10.0 },
#   { subsystem = 1, type = &quot;spline0&quot;, num = 300 }
# ]

# Carrier wave frequencies (GHz).
# Option 1: Specify different arrays of frequencies for each subsystem, as array of tables
carrier_frequency = [
  {subsystem = 0, value = [0.0, -0.2198, -0.1]},
  {subsystem = 1, value = [0.0, -0.2252, -0.1]}
]
# Option 2: Same array of frequencies for all subsystems using a table
# carrier_frequency = { values = [0.0, -0.2252, -0.1] }
# Option 3: Same array of frequencies for all subsystems using shorthand
# carrier_frequency = [0.0, -0.2252, -0.1]

## Control parameter initialization:
# Available types:
# &quot;random&quot; - random initialization within amplitude bounds (amplitude = ...)
# &quot;constant&quot; - constant amplitude initialization (amplitude = ...)
# &quot;file&quot; - read initial parameters from file (filename = &quot;...&quot;)
## Option 1: Initialization that applies to all subsystems
initialization = { type = &quot;random&quot;, amplitude = 0.005}
# initialization = { type = &quot;file&quot;, filename = &quot;./params.dat&quot;}
## Option 2: Specify different initialization per subsystem as array of tables
# initialization = [
#   { subsystem = 0, type = &quot;constant&quot;, amplitude = 0.003 },
#   { subsystem = 1, type = &quot;random&quot;, amplitude = 0.05 }
# ]

# Maximum amplitude bound for the control pulses (GHz).
# Option 1: Single value applies to all subsystems
amplitude_bound = 0.008
# Option 2: Specify different bounds for each subsystem as array
# amplitude_bound = [0.008, 0.010]

## Decide whether control pulses should start and end at zero.
zero_boundary_condition = false

[optimization]
# Optimization target options:
# Available target types:
# &quot;none&quot; - No optimization target
# &quot;gate&quot; - Unitary gate transformation. The gate can be read from file (filename = &quot;...&quot;), or chosen from standard gates below (gate_type = &quot;...&quot;). Optionally, a gate rotation frequency can be specified (gate_rot_freq = single value or array)
# &quot;state&quot; - Single target state. The state can be read from file (filename = &quot;...&quot;), or can be specified as levels of a product state (levels = [...])
target = {type = &quot;gate&quot;, gate_type = &quot;cnot&quot;} # &quot;cnot&quot;, &quot;cqnot&quot;, &quot;swap&quot;, &quot;swap0q&quot;, &quot;qft&quot;, &quot;xgate&quot;, &quot;ygate&quot;, &quot;zgate&quot;, &quot;hadamard&quot;
# target = { type = &quot;gate&quot;, gate_type = &quot;cnot&quot;, gate_rot_freq = 0.0 }           # single value for all
# target = { type = &quot;gate&quot;, gate_type = &quot;cnot&quot;, gate_rot_freq = [0.0, 0.0] }    # one per subsystem
# target = {type = &quot;gate&quot;, filename = &quot;/path/to/target_gate.dat&quot;}
# target = {type = &quot;state&quot;, levels = [0, 0]}
# target = {type = &quot;state&quot;, filename = &quot;/path/to/target_state.dat&quot;}
#target = {type = &quot;none&quot;}

# Objective function measure options: &quot;Jtrace&quot;, &quot;Jfrobenius&quot;, &quot;Jmeasure&quot;
objective = &quot;Jtrace&quot;

# Weights (beta_i) for summing up objective function terms from different initial conditions.
# Must be an array of weights (one per initial condition). Default is uniform weighting.
# weights = [1.0, 0.1, 0.1, 0.1]

# Optimization tolerances (stopping criteria):
tolerance = { grad_abs = 1e-7,     # absolute gradient norm tolerance (||G|| &lt; grad_abs)
              grad_rel = 1e-8,     # relative gradient norm tolerance (||G||/||G0|| &lt; grad_rel)
              final_cost = 1e-5,   # final-time cost tolerance (J(T) &lt; final_cost)
              infidelity = 1e-5    # infidelity tolerance (1 - F_avg &lt; infidelity)
            }
# Maximum number of optimization iterations
maxiter = 200

# Tikhonov regularization for the optimization variables (gamma * ||x||^2)
tikhonov = { coeff = 0.00001,   # Coefficient (gamma) for Tikhonov regularization
             use_x0 = false     # use gamma * ||x - x_0||^2 instead (default: false)
           }

# Coefficients for Penalty terms added to the optimization cost function
penalty = { leakage = 0.0,                # Penalize leakage into guard levels
            energy = 0.0,                 # Penalize integral over control pulse energy
            dpdm = 0.0,                   # Penalize 2nd derivative of state populations
            variation = 0.0,              # Penalize control pulse variation (for 0-th order Bsplines)
            weightedcost = 0.0,           # Penalize time-weighted cost function integral
            weightedcost_width = 0.0      # Width paramter for weighted cost function integral
          }

[output]
# Directory for output files
directory = &quot;./data_out&quot;
# Specify the desired observables during time evolution. Format: list of any of the following options:
# &quot;expectedEnergy&quot; - expected level occupation for each subsystem
# &quot;expectedEnergyComposite&quot; - expected level of the full-dimensional composite system
# &quot;population&quot; - level occupation (probabilities) for each subsystem
# &quot;populationComposite&quot; - level occupation (probabilities) for the full-dimensional composite system
# &quot;fullstate&quot; - full state of the composite system (full density matrix, or state vector). WARNING: This might result in very large output files - use with care.
observables = [&quot;population&quot;, &quot;expectedEnergy&quot;]
# Output frequency in the time domain: write output every &lt;num&gt; time-step
timestep_stride = 1
# Output frequency for optimization history: write every &lt;num&gt; optimization iterations
optimization_stride = 1

[solver]
# Runtype options:
# &quot;simulation&quot; - a forward simulation only
# &quot;gradient&quot; - forward simulation and backward simulation
# &quot;optimization&quot; - a full optimization cycle
# &quot;evalControls&quot; - only evaluates the current control pulses (no simulation)
runtype = &quot;optimization&quot;
# Use matrix free solver, instead of sparse matrix implementation. Only available for 2,3,4, or 5 subsystems.
usematfree = true
# Linear solver configuration: type can be &quot;gmres&quot; or &quot;neumann&quot;, and maximum number of iteration (maxiter)
linearsolver = { type = &quot;gmres&quot;, maxiter = 20 }
# Switch the time-stepping algorithm. Currently available:
# &quot;IMR&quot; - Implicit Midpoint Rule (IMR) of 2nd order,
# &quot;IMR4&quot; - Compositional IMR of order 2 using 3 stages,
# &quot;IMR8&quot; - Compositional IMR of order 8 using 15 stages,
# &quot;EE&quot; - Explicit Euler (EE) of 1st order, (for debugging only)
timestepper = &quot;IMR&quot;
# Fixed seed for the random number generator. Comment out, or set negative if seed should be random (non-reproducable)
rand_seed = 1234

</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../javascripts/mathjax.js"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
